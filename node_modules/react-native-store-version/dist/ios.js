export const getIOSVersion = async (storeURL = '', country = 'jp') => {
    const appID = storeURL.match(/.+id([0-9]+)\??/);
    if (!appID) {
        throw new Error('iosStoreURL is invalid.');
    }
    const response = await fetch(`https://itunes.apple.com/lookup?id=${appID[1]}&country=${country}&${new Date().getTime()}`, {
        headers: {
            'cache-control': 'no-cache',
        },
    })
        .then((r) => r.text())
        .then((r) => JSON.parse(r));
    if (!response || !response.results || response.results.length === 0) {
        throw new Error(`appID(${appID[1]}) is not released.`);
    }
    return response.results[0].version;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW9zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2lvcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFFLFFBQVEsR0FBRyxFQUFFLEVBQUUsT0FBTyxHQUFHLElBQUksRUFBRSxFQUFFO0lBQ25FLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUVoRCxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQ1YsTUFBTSxJQUFJLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0tBQzVDO0lBRUQsTUFBTSxRQUFRLEdBQUcsTUFBTSxLQUFLLENBQzFCLHNDQUNFLEtBQUssQ0FBQyxDQUFDLENBQ1QsWUFBWSxPQUFPLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUM3QztRQUNFLE9BQU8sRUFBRTtZQUNQLGVBQWUsRUFBRSxVQUFVO1NBQzVCO0tBQ0YsQ0FDRjtTQUNFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ3JCLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTlCLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUNuRSxNQUFNLElBQUksS0FBSyxDQUFDLFNBQVMsS0FBSyxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0tBQ3hEO0lBRUQsT0FBTyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQWlCLENBQUM7QUFDL0MsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGdldElPU1ZlcnNpb24gPSBhc3luYyAoc3RvcmVVUkwgPSAnJywgY291bnRyeSA9ICdqcCcpID0+IHtcbiAgY29uc3QgYXBwSUQgPSBzdG9yZVVSTC5tYXRjaCgvLitpZChbMC05XSspXFw/Py8pO1xuXG4gIGlmICghYXBwSUQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2lvc1N0b3JlVVJMIGlzIGludmFsaWQuJyk7XG4gIH1cblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgIGBodHRwczovL2l0dW5lcy5hcHBsZS5jb20vbG9va3VwP2lkPSR7XG4gICAgICBhcHBJRFsxXVxuICAgIH0mY291bnRyeT0ke2NvdW50cnl9JiR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YCxcbiAgICB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdjYWNoZS1jb250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgIH0sXG4gICAgfVxuICApXG4gICAgLnRoZW4oKHIpID0+IHIudGV4dCgpKVxuICAgIC50aGVuKChyKSA9PiBKU09OLnBhcnNlKHIpKTtcblxuICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5yZXN1bHRzIHx8IHJlc3BvbnNlLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBhcHBJRCgke2FwcElEWzFdfSkgaXMgbm90IHJlbGVhc2VkLmApO1xuICB9XG5cbiAgcmV0dXJuIHJlc3BvbnNlLnJlc3VsdHNbMF0udmVyc2lvbiBhcyBzdHJpbmc7XG59O1xuIl19